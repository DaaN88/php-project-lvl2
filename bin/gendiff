#!/usr/bin/env php
<?php

use function Gendiff\data\dataForGendiff\getReference;
use function Gendiff\Application\Functions\genDiff;

// Путь который будет использован при глобальной установке пакета
$autoloadGlobalPath = __DIR__ . '/../../../autoload.php';
// Путь для локальной работы с проектом
$autoloadLocalPath = __DIR__ . '/../vendor/autoload.php';

if (file_exists($autoloadGlobalPath)) {
    require_once $autoloadGlobalPath;
} else {
    require_once $autoloadLocalPath;
}

$doc = getReference();

$params = [
  'argv'=>array_slice($_SERVER['argv'], 1),
  'help' => true,
  'version' => 'Generate diff',
  'optionsFirst' => false,
];

$result = Docopt::handle($doc, $params);

$nameBeforeFile = $result->args['<firstFile>'];
$nameAfterFile = $result->args['<secondFile>'];

echo(genDiff($nameBeforeFile, $nameAfterFile));
